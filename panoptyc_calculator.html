<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Panoptyc Dining Theft Plans</title>

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Inter font -->
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"
    rel="stylesheet"
  />

  <style>
    /* 1. Reset margins & avoid hidden misalignment */
    html, body {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    /* 2. The rest of your styling, unchanged: */
    body {
      font-family: 'Inter', sans-serif;
      background-color: #f3f4f6; /* gray-100 */
    }
    .card {
      background-color: white;
      border-radius: 0.5rem;
      padding: 1.5rem;
      box-shadow:
        0 4px 6px -1px rgba(0,0,0,0.1),
        0 2px 4px -2px rgba(0,0,0,0.1);
      margin-bottom: 1.5rem;
    }
    .tier-card {
      text-align: center;
      border: 1px solid #e5e7eb;
      border-radius: 0.5rem;
      cursor: pointer;
      transition: transform 0.1s ease-in-out, box-shadow 0.1s ease-in-out;
      padding: 1rem;
    }
    .tier-card:hover {
      transform: translateY(-2px);
      box-shadow:
        0 6px 10px -1px rgba(0,0,0,0.1),
        0 4px 6px -2px rgba(0,0,0,0.1);
    }
    .plan-silver  { color: #3b82f6; }
    .plan-gold    { color: #ca8a04; }
    .plan-diamond { color: #a855f7; }
    .recommended-border-silver  { border-color: #3b82f6; }
    .recommended-bg-silver      { background-color: #eff6ff; }
    .recommended-border-gold    { border-color: #ca8a04; }
    .recommended-bg-gold        { background-color: #fefce8; }
    .recommended-border-diamond { border-color: #a855f7; }
    .recommended-bg-diamond     { background-color: #faf5ff; }
    .selected-highlight {
      border-width: 3px !important;
      border-color: #10B981 !important;
      box-shadow: 0 0 0 3px #10B981;
    }
    label {
      font-weight: 500;
      color: #374151;
    }
    .input-group {
      margin-bottom: 1rem;
    }
    .input-group input {
      width: 100%;
      padding: 0.5rem 0.75rem;
      border: 1px solid #d1d5db;
      border-radius: 0.375rem;
      box-shadow: inset 0 1px 2px rgba(0,0,0,0.05);
      font-size: 1rem;
      color: #111827;
    }
    .input-group input:focus {
      outline: none;
      border-color: #3b82f6;
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
    }
    .output-value {
      font-weight: 600;
    }
  </style>
</head>

<body class="p-4 md:p-8">
  <div class="max-w-6xl mx-auto">
    <header class="mb-8 text-center">
      <h1 class="text-3xl md:text-4xl font-bold text-gray-800">
        Panoptyc Dining Theft Plans
      </h1>
    </header>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <!-- Sidebar (Inputs) -->
      <div class="md:col-span-1 card">
        <h2 class="text-xl font-semibold text-gray-700 mb-4">Cafe Inputs</h2>
        <div class="input-group">
          <label for="numKiosks">Number of Kiosks:</label>
          <input type="number" id="numKiosks" value="2" min="1" />
        </div>
        <div class="input-group">
          <label for="annualRevenue">Annual Revenue ($):</label>
          <input type="number" id="annualRevenue" value="1000000" min="0" step="1000" />
        </div>
        <div class="input-group">
          <label for="shrinkPercent">Current Shrink (%):</label>
          <input type="number" id="shrinkPercent" value="10" min="0" max="100" step="0.1" />
        </div>
        <div class="input-group">
          <label for="anticipatedReduction">Anticipated Theft Reduction (%):</label>
          <input
            type="number"
            id="anticipatedReduction"
            value="50"
            min="0"
            max="100"
            step="1"
          />
          <p class="text-xs text-gray-500 mt-1">
            Used for Shrink Metrics & ROI per $1 calculations.
          </p>
        </div>
      </div>

      <!-- Main Content -->
      <div class="md:col-span-2 space-y-6">
        <!-- Pricing Tiers Card -->
        <div class="card">
          <h2 class="text-xl font-semibold text-gray-700 mb-4">
            Pricing Tiers (Monthly)
          </h2>
          <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
            <div
              id="silverPlanCard"
              class="tier-card plan-silver"
              onclick="selectPlan('Silver')"
            >
              <h3 class="text-lg font-bold">Silver Plan</h3>
              <p class="text-2xl font-semibold my-2" id="silverMonthlyCost">
                $0.00/mo
              </p>
              <p class="text-sm text-gray-600" id="silverReviews">
                0 reviews/mo
              </p>
            </div>

            <div
              id="goldPlanCard"
              class="tier-card plan-gold"
              onclick="selectPlan('Gold')"
            >
              <h3 class="text-lg font-bold">Gold Plan</h3>
              <p class="text-2xl font-semibold my-2" id="goldMonthlyCost">
                $0.00/mo
              </p>
              <p class="text-sm text-gray-600" id="goldReviews">
                0 reviews/mo
              </p>
            </div>

            <div
              id="diamondPlanCard"
              class="tier-card plan-diamond"
              onclick="selectPlan('Diamond')"
            >
              <h3 class="text-lg font-bold">Diamond Plan</h3>
              <p class="text-2xl font-semibold my-2" id="diamondMonthlyCost">
                $0.00/mo
              </p>
              <p class="text-sm text-gray-600" id="diamondReviews">
                0 reviews/mo
              </p>
            </div>
          </div>
        </div>

        <!-- Plan Recommendation Card -->
        <div id="recommendationCard" class="card border-2 border-gray-200">
          <h2 class="text-xl font-semibold text-gray-700 mb-2">
            Plan Recommendation
          </h2>
          <p class="text-lg">
            <span>Recommended Plan:</span>
            <span class="font-bold text-orange-600" id="recommendedPlan">
              CALCULATING...
            </span>
          </p>
          <p class="text-sm text-gray-500 mt-1" id="recommendationBasis">
            plan recommendation based on number of kiosks and annual shrink
          </p>
        </div>

        <!-- Shrink Metrics Card -->
        <div class="card">
          <div class="flex justify-between items-center mb-4">
            <h2 class="text-xl font-semibold text-gray-700">Shrink Metrics</h2>
            <p class="text-sm text-gray-600" id="metricsForPlanInfo"></p>
          </div>
          <div class="space-y-3">
            <div class="flex justify-between">
              <span>Current Annual Shrink ($):</span>
              <span class="output-value" id="currentShrinkDollars">
                $0.00
              </span>
            </div>
            <div class="flex justify-between">
              <span>Panoptyc Annual Cost (<span id="planNameLabel">—</span> Plan) ($):</span>
              <span class="output-value" id="panoptycAnnualCost">
                $0.00
              </span>
            </div>
            <div class="flex justify-between">
              <span>Projected Annual Shrink Reduction ($):</span>
              <span class="output-value" id="projectedShrinkReduction">
                $0.00
              </span>
            </div>
            <div class="flex justify-between">
              <span>Net Annual Savings (ROI in $) ($):</span>
              <span class="output-value" id="netAnnualSavings">$0.00</span>
            </div>
            <div class="flex justify-between">
              <span>Savings per $1 Spent (on <span id="planNameLabel2">—</span> Plan):</span>
              <span class="output-value text-green-600" id="savingsPerDollarSpentMetric">
                $0.00
              </span>
            </div>
          </div>
        </div>

        <!-- Value Proposition Card -->
        <div class="card">
          <h2 class="text-xl font-semibold text-gray-700 mb-2">Value Proposition</h2>
          <p class="text-gray-800">
            For every $1 spent on the <span class="font-semibold" id="valuePropPlan">—</span> Plan,
            you get back: <span class="font-semibold text-green-600" id="valuePropROI">$0.00</span> in reduced theft.
          </p>
        </div>
      </div>
    </div>
  </div>


  <!-- JavaScript Calculation & DOM Updates -->
  <script>
    let manuallySelectedPlanName = null;

    const plans = {
      Silver: {
        pricePerKiosk: 300,
        reviewsPerKiosk: 16,
        colorClass: "plan-silver",
        cardId: "silverPlanCard",
        recommendedBorder: "recommended-border-silver",
        recommendedBg: "recommended-bg-silver",
      },
      Gold: {
        pricePerKiosk: 450,
        reviewsPerKiosk: 24,
        colorClass: "plan-gold",
        cardId: "goldPlanCard",
        recommendedBorder: "recommended-border-gold",
        recommendedBg: "recommended-bg-gold",
      },
      Diamond: {
        pricePerKiosk: 750,
        reviewsPerKiosk: 48,
        colorClass: "plan-diamond",
        cardId: "diamondPlanCard",
        recommendedBorder: "recommended-border-diamond",
        recommendedBg: "recommended-bg-diamond",
      },
    };

    const numKiosksInput = document.getElementById("numKiosks");
    const annualRevenueInput = document.getElementById("annualRevenue");
    const shrinkPercentInput = document.getElementById("shrinkPercent");
    const anticipatedReductionInput = document.getElementById("anticipatedReduction");

    const silverMonthlyCostEl = document.getElementById("silverMonthlyCost");
    const silverReviewsEl = document.getElementById("silverReviews");
    const goldMonthlyCostEl = document.getElementById("goldMonthlyCost");
    const goldReviewsEl = document.getElementById("goldReviews");
    const diamondMonthlyCostEl = document.getElementById("diamondMonthlyCost");
    const diamondReviewsEl = document.getElementById("diamondReviews");

    const recommendedPlanEl = document.getElementById("recommendedPlan");
    const recommendationBasisEl = document.getElementById("recommendationBasis");
    const recommendationCardEl = document.getElementById("recommendationCard");
    const metricsForPlanInfoEl = document.getElementById("metricsForPlanInfo");
    const currentShrinkDollarsEl = document.getElementById("currentShrinkDollars");
    const panoptycAnnualCostEl = document.getElementById("panoptycAnnualCost");
    const projectedShrinkReductionEl = document.getElementById("projectedShrinkReduction");
    const netAnnualSavingsEl = document.getElementById("netAnnualSavings");
    const savingsPerDollarSpentMetricEl = document.getElementById("savingsPerDollarSpentMetric");
    const planNameLabel = document.getElementById("planNameLabel");
    const planNameLabel2 = document.getElementById("planNameLabel2");
    const valuePropPlanEl = document.getElementById("valuePropPlan");
    const valuePropROIEl = document.getElementById("valuePropROI");

    function formatCurrency(val) {
      return new Intl.NumberFormat("en-US", {
        style: "currency",
        currency: "USD"
      }).format(val);
    }

    function calculateAndDisplay() {
      const numKiosks = parseInt(numKiosksInput.value) || 0;
      const annualRevenue = parseFloat(annualRevenueInput.value) || 0;
      const shrinkPercent = parseFloat(shrinkPercentInput.value) / 100 || 0;
      const anticipatedReductionPercent = parseFloat(anticipatedReductionInput.value) / 100 || 0;

      // Update each plan’s monthly cost + reviews
      silverMonthlyCostEl.textContent = formatCurrency(plans.Silver.pricePerKiosk * numKiosks) + "/mo";
      silverReviewsEl.textContent = plans.Silver.reviewsPerKiosk * numKiosks + " reviews/mo";

      goldMonthlyCostEl.textContent = formatCurrency(plans.Gold.pricePerKiosk * numKiosks) + "/mo";
      goldReviewsEl.textContent = plans.Gold.reviewsPerKiosk * numKiosks + " reviews/mo";

      diamondMonthlyCostEl.textContent = formatCurrency(plans.Diamond.pricePerKiosk * numKiosks) + "/mo";
      diamondReviewsEl.textContent = plans.Diamond.reviewsPerKiosk * numKiosks + " reviews/mo";

      // Clear previous highlights
      Object.values(plans).forEach(plan => {
        const card = document.getElementById(plan.cardId);
        card.classList.remove(
          "border-2",
          plan.recommendedBorder,
          plan.recommendedBg,
          "selected-highlight"
        );
      });

      // Current Annual Shrink calculation
      const currentAnnualShrinkDollars = annualRevenue * shrinkPercent;
      currentShrinkDollarsEl.textContent = formatCurrency(currentAnnualShrinkDollars);

      // Determine auto recommendation (ROI ≥ 2)
      let autoRecommendedPlanName = "N/A";
      let autoBestPlan = null;
      let smallestCost = Infinity;
      const hypotheticalSavings = currentAnnualShrinkDollars * 0.25;
      const ROI_THRESHOLD = 2.0;

      if (annualRevenue > 0 && shrinkPercent > 0 && numKiosks > 0) {
        Object.entries(plans).forEach(([name, data]) => {
          const annualCost = data.pricePerKiosk * numKiosks * 12;
          const roi = annualCost > 0 ? hypotheticalSavings / annualCost : 0;
          if (roi >= ROI_THRESHOLD && annualCost < smallestCost) {
            smallestCost = annualCost;
            autoRecommendedPlanName = name;
            autoBestPlan = data;
          }
        });

        if (autoRecommendedPlanName === "N/A") {
          autoRecommendedPlanName = "Silver";
          autoBestPlan = plans.Silver;
        }
      }

      // Final chosen plan (manual override or auto)
      const finalPlanName = manuallySelectedPlanName || autoRecommendedPlanName;
      const finalPlanData = plans[finalPlanName] || plans.Silver;
      const finalAnnualCost = finalPlanData.pricePerKiosk * numKiosks * 12;

      // Highlight auto recommended card
      if (autoBestPlan) {
        const recCard = document.getElementById(autoBestPlan.cardId);
        recCard.classList.add(
          autoBestPlan.recommendedBg,
          autoBestPlan.recommendedBorder,
          "border-2"
        );
      }

      // Highlight manual selection if present
      if (manuallySelectedPlanName) {
        const selCard = document.getElementById(finalPlanData.cardId);
        selCard.classList.add("selected-highlight");
      }

      // Update “Recommended Plan” text & border
      recommendedPlanEl.textContent = finalPlanName.toUpperCase();
      recommendationCardEl.classList.remove("border-gray-200");
      recommendationCardEl.classList.add("border-2");
      if (finalPlanData.recommendedBorder) {
        recommendationCardEl.classList.add(finalPlanData.recommendedBorder);
      } else {
        recommendationCardEl.classList.add("border-gray-200");
      }

      // Update “Panoptyc Annual Cost” in Shrink Metrics
      panoptycAnnualCostEl.textContent = formatCurrency(finalAnnualCost);

      // Update “Projected Reduction”
      const projectedReduction = currentAnnualShrinkDollars * anticipatedReductionPercent;
      projectedShrinkReductionEl.textContent = formatCurrency(projectedReduction);

      // Update “Net Annual Savings”
      const netSavings = projectedReduction - finalAnnualCost;
      netAnnualSavingsEl.textContent = formatCurrency(netSavings);
      netAnnualSavingsEl.classList.toggle("text-green-600", netSavings >= 0);
      netAnnualSavingsEl.classList.toggle("text-red-600", netSavings < 0);

      // Update “Savings per $1 Spent”
      const savingsPerDollar = finalAnnualCost > 0 ? projectedReduction / finalAnnualCost : 0;
      savingsPerDollarSpentMetricEl.textContent = formatCurrency(savingsPerDollar);

      // Update plan labels inside Shrink Metrics & Value Proposition
      planNameLabel.textContent = finalPlanName;
      planNameLabel2.textContent = finalPlanName;
      valuePropPlanEl.textContent = finalPlanName;
      valuePropROIEl.textContent = formatCurrency(savingsPerDollar);

      // Update “(Showing metrics for …)” text
      metricsForPlanInfoEl.textContent = `(Showing metrics for ${finalPlanName} plan)`;

      // If inputs invalid, show a warning
      if (annualRevenue <= 0 || shrinkPercent <= 0 || numKiosks <= 0) {
        recommendedPlanEl.textContent = "ENTER VALID VALUES";
        recommendationCardEl.classList.remove("border-2");
        recommendationCardEl.classList.add("border-yellow-400");
      }
    }

    // Called when user clicks a tier card
    function selectPlan(planName) {
      manuallySelectedPlanName = planName;
      calculateAndDisplay();
    }

    // Attach event listeners to inputs
    [numKiosksInput, annualRevenueInput, shrinkPercentInput, anticipatedReductionInput].forEach(el => {
      el.addEventListener("input", () => {
        manuallySelectedPlanName = null;
        calculateAndDisplay();
      });
    });

    // Initial render on page load
    calculateAndDisplay();
  </script>
</body>
</html>
