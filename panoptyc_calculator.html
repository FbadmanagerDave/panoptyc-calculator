<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Panoptyc Dining Theft Plans</title>

  <!-- 1) Tailwind CSS CDN (okay for a standalone HTML file) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- 2) Inter font (used throughout for a clean, modern look) -->
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"
    rel="stylesheet"
  />

  <style>
    /* Use Inter throughout */
    body {
      font-family: 'Inter', sans-serif;
      background-color: #f3f4f6; /* Tailwind gray-100 */
    }

    /* Generic “card” style */
    .card {
      background-color: white;
      border-radius: 0.5rem; /* rounded-lg */
      padding: 1.5rem;       /* p-6 */
      box-shadow:
        0 4px 6px -1px rgba(0,0,0,0.1),
        0 2px 4px -2px rgba(0,0,0,0.1);
      margin-bottom: 1.5rem; /* mb-6 */
    }

    /* Pricing‐tier card style */
    .tier-card {
      text-align: center;
      border: 1px solid #e5e7eb; /* gray-200 */
      border-radius: 0.5rem;     /* rounded-lg */
      cursor: pointer;
      transition: transform 0.1s ease-in-out, box-shadow 0.1s ease-in-out;
      padding: 1rem;             /* p-4 */
    }
    .tier-card:hover {
      transform: translateY(-2px);
      box-shadow:
        0 6px 10px -1px rgba(0,0,0,0.1),
        0 4px 6px -2px rgba(0,0,0,0.1);
    }

    /* Text colors for Silver, Gold, Diamond */
    .plan-silver  { color: #3b82f6; }   /* Tailwind blue-500 */
    .plan-gold    { color: #ca8a04; }   /* Tailwind yellow-600 */
    .plan-diamond { color: #a855f7; }   /* Tailwind purple-600 */

    /* “Recommended” border/ background classes */
    .recommended-border-silver  { border-color: #3b82f6; } /* blue-500 */
    .recommended-bg-silver      { background-color: #eff6ff; } /* blue-50 */

    .recommended-border-gold    { border-color: #ca8a04; } /* yellow-600 */
    .recommended-bg-gold        { background-color: #fefce8; } /* yellow-50 */

    .recommended-border-diamond { border-color: #a855f7; } /* purple-600 */
    .recommended-bg-diamond     { background-color: #faf5ff; } /* purple-50 */

    /* If user manually selects a plan, highlight with green */
    .selected-highlight {
      border-width: 3px !important;
      border-color: #10B981 !important; /* Tailwind green-500 */
      box-shadow: 0 0 0 3px #10B981;
    }

    /* Input label styling */
    label {
      font-weight: 500;    /* font‐medium */
      color: #374151;      /* gray-700 */
    }
    .input-group {
      margin-bottom: 1rem; /* mb-4 */
    }
    .input-group input {
      width: 100%;
      padding: 0.5rem 0.75rem;   /* py-2 px-3 */
      border: 1px solid #d1d5db; /* gray-300 */
      border-radius: 0.375rem;   /* rounded-md */
      box-shadow: inset 0 1px 2px rgba(0,0,0,0.05);
      font-size: 1rem;
      color: #111827;            /* gray-900 */
    }
    .input-group input:focus {
      outline: none;
      border-color: #3b82f6; /* blue-500 */
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
    }

    /* Numeric output styling */
    .output-value {
      font-weight: 600; /* font‐semibold */
    }
  </style>
</head>

<body class="p-4 md:p-8">
  <div class="max-w-6xl mx-auto">
    <!-- Page Title -->
    <header class="mb-8 text-center">
      <h1 class="text-3xl md:text-4xl font-bold text-gray-800">
        Panoptyc Dining Theft Plans
      </h1>
    </header>

    <!-- Grid: Sidebar on left (1/3), Main on right (2/3) for md+ screens; stacked on mobile -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <!-- ======================
           SIDEBAR: Inputs
           ====================== -->
      <div class="md:col-span-1 card">
        <h2 class="text-xl font-semibold text-gray-700 mb-4">Cafe Inputs</h2>
        <div class="input-group">
          <label for="numKiosks">Number of Kiosks:</label>
          <input
            type="number"
            id="numKiosks"
            value="2"
            min="1"
          />
        </div>
        <div class="input-group">
          <label for="annualRevenue">Annual Revenue ($):</label>
          <input
            type="number"
            id="annualRevenue"
            value="1000000"
            min="0"
            step="1000"
          />
        </div>
        <div class="input-group">
          <label for="shrinkPercent">Current Shrink (%):</label>
          <input
            type="number"
            id="shrinkPercent"
            value="10"
            min="0"
            max="100"
            step="0.1"
          />
        </div>
        <div class="input-group">
          <label for="anticipatedReduction">Anticipated Theft Reduction (%):</label>
          <input
            type="number"
            id="anticipatedReduction"
            value="50"
            min="0"
            max="100"
            step="1"
          />
          <p class="text-xs text-gray-500 mt-1">
            Used for Shrink Metrics & ROI per $1 calculations.
          </p>
        </div>
      </div>

      <!-- ======================
           MAIN: Results
           ====================== -->
      <div class="md:col-span-2 space-y-6">
        <!-- CARD 1: Pricing Tiers (Monthly) -->
        <div class="card">
          <h2 class="text-xl font-semibold text-gray-700 mb-4">
            Pricing Tiers (Monthly)
          </h2>
          <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
            <!-- SILVER PLAN CARD -->
            <div
              id="silverPlanCard"
              class="tier-card plan-silver"
              onclick="selectPlan('Silver')"
            >
              <h3 class="text-lg font-bold">Silver Plan</h3>
              <p class="text-2xl font-semibold my-2" id="silverMonthlyCost">
                $0.00/mo
              </p>
              <p class="text-sm text-gray-600" id="silverReviews">
                0 reviews/mo
              </p>
            </div>

            <!-- GOLD PLAN CARD -->
            <div
              id="goldPlanCard"
              class="tier-card plan-gold"
              onclick="selectPlan('Gold')"
            >
              <h3 class="text-lg font-bold">Gold Plan</h3>
              <p class="text-2xl font-semibold my-2" id="goldMonthlyCost">
                $0.00/mo
              </p>
              <p class="text-sm text-gray-600" id="goldReviews">
                0 reviews/mo
              </p>
            </div>

            <!-- DIAMOND PLAN CARD -->
            <div
              id="diamondPlanCard"
              class="tier-card plan-diamond"
              onclick="selectPlan('Diamond')"
            >
              <h3 class="text-lg font-bold">Diamond Plan</h3>
              <p class="text-2xl font-semibold my-2" id="diamondMonthlyCost">
                $0.00/mo
              </p>
              <p class="text-sm text-gray-600" id="diamondReviews">
                0 reviews/mo
              </p>
            </div>
          </div>
        </div>

        <!-- CARD 2: Plan Recommendation -->
        <div id="recommendationCard" class="card border-2 border-gray-200">
          <h2 class="text-xl font-semibold text-gray-700 mb-2">
            Plan Recommendation
          </h2>
          <p class="text-lg">
            <span>Recommended Plan:</span>
            <span class="font-bold text-orange-600" id="recommendedPlan">
              CALCULATING...
            </span>
          </p>
          <p class="text-sm text-gray-500 mt-1" id="recommendationBasis">
            plan recommendation based on number of kiosks and annual shrink
          </p>
        </div>

        <!-- CARD 3: Shrink Metrics -->
        <div class="card">
          <div class="flex justify-between items-center mb-4">
            <h2 class="text-xl font-semibold text-gray-700">Shrink Metrics</h2>
            <p class="text-sm text-gray-600" id="metricsForPlanInfo"></p>
          </div>
          <div class="space-y-3">
            <!-- Row 1: Current Annual Shrink -->
            <div class="flex justify-between">
              <span>Current Annual Shrink ($):</span>
              <span class="output-value" id="currentShrinkDollars">$0.00</span>
            </div>
            <!-- Row 2: Panoptyc Annual Cost for the chosen plan -->
            <div class="flex justify-between">
              <span>
                Panoptyc Annual Cost (
                <span id="planNameLabel">—</span> Plan
                ) ($):
              </span>
              <span class="output-value" id="panoptycAnnualCost">$0.00</span>
            </div>
            <!-- Row 3: Projected Annual Shrink Reduction -->
            <div class="flex justify-between">
              <span>Projected Annual Shrink Reduction ($):</span>
              <span class="output-value" id="projectedShrinkReduction">
                $0.00
              </span>
            </div>
            <!-- Row 4: Net Annual Savings (ROI in $) -->
            <div class="flex justify-between">
              <span>Net Annual Savings (ROI in $) ($):</span>
              <span
                class="output-value"
                id="netAnnualSavings"
                >$0.00</span
              >
            </div>
            <!-- Row 5: Savings per $1 Spent (on chosen plan) -->
            <div class="flex justify-between">
              <span>Savings per $1 Spent (on <span id="planNameLabel2">—</span> Plan):</span>
              <span
                class="output-value text-green-600"
                id="savingsPerDollarSpentMetric"
                >$0.00</span
              >
            </div>
          </div>
        </div>

        <!-- CARD 4: Value Proposition -->
        <div class="card">
          <h2 class="text-xl font-semibold text-gray-700 mb-2">Value Proposition</h2>
          <p class="text-gray-800">
            For every $1 spent on the <span class="font-semibold" id="valuePropPlan">—</span> Plan,
            you get back:
            <span class="font-semibold text-green-600" id="valuePropROI">$0.00</span>
            in reduced theft.
          </p>
        </div>
      </div>
    </div>
  </div>



  <!-- ==============================================================
       JavaScript → Calculation & DOM Updates (no changes to HTML structure)
       ============================================================== -->
  <script>
    // If user clicks a plan card, this overrides auto recommendation
    let manuallySelectedPlanName = null;

    // Plan definitions (with colors, prices, etc.)
    const plans = {
      Silver: {
        pricePerKiosk: 300,
        reviewsPerKiosk: 16,
        colorClass: "plan-silver",
        cardId: "silverPlanCard",
        recommendedBorder: "recommended-border-silver",
        recommendedBg: "recommended-bg-silver",
      },
      Gold: {
        pricePerKiosk: 450,
        reviewsPerKiosk: 24,
        colorClass: "plan-gold",
        cardId: "goldPlanCard",
        recommendedBorder: "recommended-border-gold",
        recommendedBg: "recommended-bg-gold",
      },
      Diamond: {
        pricePerKiosk: 750,
        reviewsPerKiosk: 48,
        colorClass: "plan-diamond",
        cardId: "diamondPlanCard",
        recommendedBorder: "recommended-border-diamond",
        recommendedBg: "recommended-bg-diamond",
      },
    };

    // Grab input elements
    const numKiosksInput = document.getElementById("numKiosks");
    const annualRevenueInput = document.getElementById("annualRevenue");
    const shrinkPercentInput = document.getElementById("shrinkPercent");
    const anticipatedReductionInput = document.getElementById(
      "anticipatedReduction"
    );

    // Grab elements for pricing text
    const silverMonthlyCostEl = document.getElementById("silverMonthlyCost");
    const silverReviewsEl = document.getElementById("silverReviews");
    const goldMonthlyCostEl = document.getElementById("goldMonthlyCost");
    const goldReviewsEl = document.getElementById("goldReviews");
    const diamondMonthlyCostEl = document.getElementById("diamondMonthlyCost");
    const diamondReviewsEl = document.getElementById("diamondReviews");

    // Recommendation & metrics elements
    const recommendedPlanEl = document.getElementById("recommendedPlan");
    const recommendationBasisEl = document.getElementById("recommendationBasis");
    const recommendationCardEl = document.getElementById("recommendationCard");
    const metricsForPlanInfoEl = document.getElementById("metricsForPlanInfo");
    const currentShrinkDollarsEl = document.getElementById("currentShrinkDollars");
    const panoptycAnnualCostEl = document.getElementById("panoptycAnnualCost");
    const projectedShrinkReductionEl = document.getElementById("projectedShrinkReduction");
    const netAnnualSavingsEl = document.getElementById("netAnnualSavings");
    const savingsPerDollarSpentMetricEl = document.getElementById(
      "savingsPerDollarSpentMetric"
    );
    const planNameLabel = document.getElementById("planNameLabel");
    const planNameLabel2 = document.getElementById("planNameLabel2");
    const valuePropPlanEl = document.getElementById("valuePropPlan");
    const valuePropROIEl = document.getElementById("valuePropROI");

    // Small helper: format a number as US currency
    function formatCurrency(value) {
      return new Intl.NumberFormat("en-US", {
        style: "currency",
        currency: "USD",
      }).format(value);
    }

    // Main function: read inputs, do all calculations, update the DOM
    function calculateAndDisplay() {
      // 1) Read input values
      const numKiosks = parseInt(numKiosksInput.value) || 0;
      const annualRevenue = parseFloat(annualRevenueInput.value) || 0;
      const shrinkPercent = parseFloat(shrinkPercentInput.value) / 100 || 0;
      const anticipatedReductionPercent =
        parseFloat(anticipatedReductionInput.value) / 100 || 0;

      // 2) Update monthly costs & reviews text for each plan
      silverMonthlyCostEl.textContent =
        formatCurrency(plans.Silver.pricePerKiosk * numKiosks) + "/mo";
      silverReviewsEl.textContent =
        plans.Silver.reviewsPerKiosk * numKiosks + " reviews/mo";

      goldMonthlyCostEl.textContent =
        formatCurrency(plans.Gold.pricePerKiosk * numKiosks) + "/mo";
      goldReviewsEl.textContent =
        plans.Gold.reviewsPerKiosk * numKiosks + " reviews/mo";

      diamondMonthlyCostEl.textContent =
        formatCurrency(plans.Diamond.pricePerKiosk * numKiosks) + "/mo";
      diamondReviewsEl.textContent =
        plans.Diamond.reviewsPerKiosk * numKiosks + " reviews/mo";

      // 3) Clear all previous highlights from the tier cards
      Object.values(plans).forEach((plan) => {
        const card = document.getElementById(plan.cardId);
        card.classList.remove(
          "border-2",
          plan.recommendedBorder,
          plan.recommendedBg,
          "selected-highlight"
        );
      });

      // 4) Compute “Current Annual Shrink”
      const currentAnnualShrinkDollars = annualRevenue * shrinkPercent;
      currentShrinkDollarsEl.textContent = formatCurrency(
        currentAnnualShrinkDollars
      );

      // 5) Determine auto‐recommended plan (ROI ≥ 2.0)
      let autoRecommendedPlanName = "N/A";
      let autoBestPlan = null;
      let smallestAnnualCost = Infinity;
      const hypotheticalSavings = currentAnnualShrinkDollars * 0.25;
      const ROI_THRESHOLD = 2.0;

      if (annualRevenue > 0 && shrinkPercent > 0 && numKiosks > 0) {
        Object.entries(plans).forEach(([planName, planData]) => {
          const annualCost = planData.pricePerKiosk * numKiosks * 12;
          const roi = annualCost > 0 ? hypotheticalSavings / annualCost : 0;
          if (roi >= ROI_THRESHOLD && annualCost < smallestAnnualCost) {
            smallestAnnualCost = annualCost;
            autoRecommendedPlanName = planName;
            autoBestPlan = planData;
          }
        });

        // Fallback to Silver if none met the ROI_THRESHOLD
        if (autoRecommendedPlanName === "N/A") {
          autoRecommendedPlanName = "Silver";
          autoBestPlan = plans.Silver;
        }
      }

      // 6) Determine “final” plan (manual override or auto recommendation)
      const finalPlanName = manuallySelectedPlanName || autoRecommendedPlanName;
      const finalPlanData = plans[finalPlanName] || plans.Silver;
      const finalAnnualCost =
        finalPlanData.pricePerKiosk * numKiosks * 12;

      // 7) Highlight auto‐recommended card (unless manual override)
      if (autoBestPlan) {
        const recCard = document.getElementById(autoBestPlan.cardId);
        recCard.classList.add(
          autoBestPlan.recommendedBg,
          autoBestPlan.recommendedBorder,
          "border-2"
        );
      }

      // 8) If user clicked a plan (manual override), highlight with green
      if (manuallySelectedPlanName) {
        const selCard = document.getElementById(finalPlanData.cardId);
        selCard.classList.add("selected-highlight");
      }

      // 9) Update “Recommended Plan” text & border color for the recommendation card
      recommendedPlanEl.textContent = finalPlanName.toUpperCase();
      recommendationCardEl.classList.remove("border-gray-200");
      recommendationCardEl.classList.add("border-2");
      if (finalPlanData.recommendedBorder) {
        recommendationCardEl.classList.add(finalPlanData.recommendedBorder);
      } else {
        recommendationCardEl.classList.add("border-gray-200");
      }

      // 10) Update “Panoptyc Annual Cost” in Shrink Metrics
      panoptycAnnualCostEl.textContent = formatCurrency(finalAnnualCost);

      // 11) Update “Projected Annual Shrink Reduction”
      const projectedReduction =
        currentAnnualShrinkDollars * anticipatedReductionPercent;
      projectedShrinkReductionEl.textContent =
        formatCurrency(projectedReduction);

      // 12) Update “Net Annual Savings (ROI in $)”
      const netSavings = projectedReduction - finalAnnualCost;
      netAnnualSavingsEl.textContent = formatCurrency(netSavings);
      netAnnualSavingsEl.classList.toggle("text-green-600", netSavings >= 0);
      netAnnualSavingsEl.classList.toggle("text-red-600", netSavings < 0);

      // 13) Update “Savings per $1 Spent (on Plan)”
      const savingsPerDollar =
        finalAnnualCost > 0 ? projectedReduction / finalAnnualCost : 0;
      savingsPerDollarSpentMetricEl.textContent = formatCurrency(
        savingsPerDollar
      );

      // 14) Update labels that need the chosen plan’s name
      planNameLabel.textContent = finalPlanName;
      planNameLabel2.textContent = finalPlanName;
      valuePropPlanEl.textContent = finalPlanName;
      valuePropROIEl.textContent = formatCurrency(savingsPerDollar);

      // 15) Update the “(Showing metrics for …)” text
      metricsForPlanInfoEl.textContent = `(Showing metrics for ${finalPlanName} plan)`;

      // 16) If inputs are invalid, override recommendation text
      if (
        annualRevenue <= 0 ||
        shrinkPercent <= 0 ||
        numKiosks <= 0
      ) {
        recommendedPlanEl.textContent = "ENTER VALID VALUES";
        recommendationCardEl.classList.remove("border-2");
        recommendationCardEl.classList.add("border-yellow-400");
      }
    }

    // Called when a tier card is clicked
    function selectPlan(planName) {
      manuallySelectedPlanName = planName;
      calculateAndDisplay();
    }

    // Attach “input” listeners to re‐calculate on every change
    [
      numKiosksInput,
      annualRevenueInput,
      shrinkPercentInput,
      anticipatedReductionInput,
    ].forEach((el) => {
      el.addEventListener("input", () => {
        manuallySelectedPlanName = null; // reset manual override
        calculateAndDisplay();
      });
    });

    // Initial rendering when the page loads
    calculateAndDisplay();
  </script>
</body>
</html>
